import os

from utilities.archive_file_handler import execute_unzip
from utilities.csv_creator import transform_dex_files
from utilities.extract_dex_files import extract_dex_from_apks_in_path
from utilities.dex_dump_utility import create_dex_dumps
#import androidMalwareDetectionWithNLP.doc2vec_training_plus_binary_classification import
#https://github.com/TheCyberian/androidMalwareDetectionWithNLP

os.system("python3 utilities/test.py")
curr = os.getcwd()
os.chdir("./dataset/testData/malicious/")
os.system("mv TM* ../../mal_to_good/")
os.chdir(curr)

os.chdir("dataset/mal_to_good")
os.system("bash manipulate.sh 0Android")
os.chdir(curr)


# 1. Unzip APKS
execute_unzip()

# 2. Collect dex files from each APK and store them with malicious or benign tag
extract_dex_from_apks_in_path()

# 3. Create text and xml of the dex files using Dexdump utility
create_dex_dumps()

# 4. Create csv file of label and text of dex dumps
transform_dex_files()
# 5. Train document vectors on xml  of classes.dex files
os.system("python3 utilities/vectorize_csv.py")

